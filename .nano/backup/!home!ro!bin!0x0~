#!/bin/sh
#curl -F'
is_url() {
  if [[ "${1#http://}" != "$1" || "${1#https://}" != "$1" ]]; then
    return 0
  fi

  return 1
}

if [[ -d "$1" ]]; then
  print_error "\"$1\" is a directory."
  exit 1
fi

if ! is_url "$1" && [[ ! -f "$1" && "$1" != "-" ]]; then
  # "-" can be used as argument to upload from standard input
  print_error "\"$1\": no such file."
  exit 1
fi

if is_url "$1"; then
  # Upload from URL
  curl -F "url=$1" https://0x0.st
else
  # Upload from file
  curl -F "file=@$1" https://0x0.st
fi
