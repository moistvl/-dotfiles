#!/bin/sh
# .config/bspwm/bspwmrc by Miika Nissi
# https://github.com/miikanissi
# https://miikanissi.com

# make sure all processes are killed
killall -q compton
killall -q sxhkd
killall -q dunst
killall -q signal-desktop
killall -q polybar

# wait until the processes have been shut down (just in case)
while pgrep -u $UID -x compton >/dev/null; do sleep 1; done
while pgrep -u $UID -x sxhkd >/dev/null; do sleep 1; done
while pgrep -u $UID -x dunst >/dev/null; do sleep 1; done
while pgrep -u $UID -x signal-desktop >/dev/null; do sleep 1; done
while pgrep -u $UID -x polybar >/dev/null; do sleep 1; done

### AUTOSTART ###
polybar -c ~/.config/polybar/config_bspwm top &
polybar -c ~/.config/polybar/config_bspwm bottom &
compton -b -c &
sxhkd &
dunst -config ~/.config/dunst/dunstrc &
signal-desktop --start-in-tray --use-tray-icon --no-sandbox %U &
light-locker &
xrdb .Xresources &

xset r rate 300 50 & # makes key repeat faster

#.local/bin/144.sh & # sets 144hz refresh rate
#.local/bin/setbg.sh & # sets wallpaper
nitrogen --restore
### BSPC ###
bspc monitor -d 1 2 3 4 5 6 7 8 9

bspc config pointer_modifier        mod4
bspc config border_width            2
bspc config window_gap              8

bspc config split_ratio             0.52
bspc config top_padding             32
bspc config borderless_monocle      true
bspc config gapless_monocle         true
bspc config single_monocle          true
bspc config focus_follows_pointer   true

bspc config focused_border_color    "#c85e7c"

bspc rule -a net-runelite-launcher-Launcher state=pseudo_tiled private=on
# bspc rule -a cmus desktop='^5' state=floating follow=on
bspc rule -a termite:ncmpcpp desktop='^6' state=floating follow=on
bspc rule -a Gimp desktop='^5' state=floating follow=on
bspc rule -a nvim state=tiled
bspc rule -a station state=tiled

xsetroot -cursor-name left_ptr &